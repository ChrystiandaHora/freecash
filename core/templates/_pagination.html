{% comment %}
Standard Pagination Partial
Usage: {% include "_pagination.html" with page=page_obj qs=querystring anchor="" %}

Variables:
  - page: The Django Page object (required)
  - qs: Optional querystring to preserve filters
  - anchor: Optional anchor to jump to (e.g., "#pagas")
{% endcomment %}

{% if page.paginator.num_pages > 1 %}
<div class="flex items-center justify-between border-t border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 sm:px-6 rounded-b-2xl">
  
  <!-- Mobile: Simpler Previous/Next -->
  <div class="flex flex-1 justify-between sm:hidden">
    {% if page.has_previous %}
      <a href="?{% if qs %}{{ qs }}&{% endif %}page={{ page.previous_page_number }}{{ anchor }}"
         class="relative inline-flex items-center rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-slate-200 hover:bg-gray-50 dark:hover:bg-slate-600">
        Anterior
      </a>
    {% else %}
      <span class="relative inline-flex items-center rounded-md border border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 px-4 py-2 text-sm font-medium text-gray-400 dark:text-slate-600 cursor-not-allowed">
        Anterior
      </span>
    {% endif %}

    {% if page.has_next %}
      <a href="?{% if qs %}{{ qs }}&{% endif %}page={{ page.next_page_number }}{{ anchor }}"
         class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-slate-200 hover:bg-gray-50 dark:hover:bg-slate-600">
        Próxima
      </a>
    {% else %}
      <span class="relative ml-3 inline-flex items-center rounded-md border border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 px-4 py-2 text-sm font-medium text-gray-400 dark:text-slate-600 cursor-not-allowed">
        Próxima
      </span>
    {% endif %}
  </div>

  <!-- Desktop: Full pagination with page numbers -->
  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
    <div>
      <p class="text-sm text-gray-700 dark:text-slate-300">
        Mostrando
        <span class="font-medium">{{ page.start_index }}</span>
        até
        <span class="font-medium">{{ page.end_index }}</span>
        de
        <span class="font-medium">{{ page.paginator.count }}</span>
        resultados
      </p>
    </div>

    <div>
      <nav aria-label="Paginação" class="isolate inline-flex -space-x-px rounded-md shadow-sm">
        <!-- Previous Arrow -->
        {% if page.has_previous %}
          <a href="?{% if qs %}{{ qs }}&{% endif %}page={{ page.previous_page_number }}{{ anchor }}"
             class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-500 dark:text-slate-400 ring-1 ring-inset ring-gray-300 dark:ring-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700 focus:z-20 focus:outline-offset-0">
            <span class="sr-only">Anterior</span>
            <i class="fa-solid fa-chevron-left text-sm" aria-hidden="true"></i>
          </a>
        {% else %}
          <span class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-300 dark:text-slate-600 ring-1 ring-inset ring-gray-200 dark:ring-slate-800 bg-gray-50 dark:bg-slate-800 cursor-not-allowed">
            <span class="sr-only">Anterior</span>
            <i class="fa-solid fa-chevron-left text-sm" aria-hidden="true"></i>
          </span>
        {% endif %}

        <!-- Page Numbers -->
        {% with total=page.paginator.num_pages current=page.number %}
          {% for num in page.paginator.page_range %}
            {% if num == 1 or num == total or num >= current|add:"-1" and num <= current|add:"1" %}
              {% if num == current %}
                <span aria-current="page"
                      class="relative z-10 inline-flex items-center bg-gray-900 dark:bg-emerald-600 px-4 py-2 text-sm font-semibold text-white ring-1 ring-inset ring-gray-900 dark:ring-emerald-600 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900 dark:focus-visible:outline-emerald-600">
                  {{ num }}
                </span>
              {% else %}
                <a href="?{% if qs %}{{ qs }}&{% endif %}page={{ num }}{{ anchor }}"
                   class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 dark:text-slate-300 ring-1 ring-inset ring-gray-300 dark:ring-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700 focus:z-20 focus:outline-offset-0">
                  {{ num }}
                </a>
              {% endif %}
            {% elif num == 2 and current > 3 %}
              <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-slate-400 ring-1 ring-inset ring-gray-300 dark:ring-slate-600">
                ...
              </span>
            {% elif num == total|add:"-1" and current < total|add:"-2" %}
              <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-slate-400 ring-1 ring-inset ring-gray-300 dark:ring-slate-600">
                ...
              </span>
            {% endif %}
          {% endfor %}
        {% endwith %}

        <!-- Next Arrow -->
        {% if page.has_next %}
          <a href="?{% if qs %}{{ qs }}&{% endif %}page={{ page.next_page_number }}{{ anchor }}"
             class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-500 dark:text-slate-400 ring-1 ring-inset ring-gray-300 dark:ring-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700 focus:z-20 focus:outline-offset-0">
            <span class="sr-only">Próxima</span>
            <i class="fa-solid fa-chevron-right text-sm" aria-hidden="true"></i>
          </a>
        {% else %}
          <span class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-300 dark:text-slate-600 ring-1 ring-inset ring-gray-200 dark:ring-slate-800 bg-gray-50 dark:bg-slate-800 cursor-not-allowed">
            <span class="sr-only">Próxima</span>
            <i class="fa-solid fa-chevron-right text-sm" aria-hidden="true"></i>
          </span>
        {% endif %}
      </nav>
    </div>
  </div>
</div>
{% endif %}
